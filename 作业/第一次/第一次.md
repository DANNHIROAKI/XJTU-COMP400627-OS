由于一些原因，作业完了一点时间提交，万分抱歉，实属意外

# 3.1. 

1. **长期调度（作业调度）**:

   :one:**目的**：确定哪些进程应该被加载到准备队列中

   :two:**时间范围**：频率较低

   :three:**决策基础**：进程的优先级、需要的资源、内存需求

   :four:**影响**：影响系统中存在的并发进程的数量。通过控制加载到内存中的进程数，防止过度的多任务，从而避免因为过多的上下文切换而导致的性能下降

   :five:**主要操作**：从磁盘加载进程到内存，或者拒绝进程执行

2. **中期调度（换出调度）**:

   :one:**目的**：调整已经在内存中但因某种原因（例如等待I/O操作）而暂时不能执行的进程。

   :two:**时间范围**：频率介于长期和短期调度之间

   :three:**决策基础**：基于进程的当前状态（例如：阻塞、等待资源等）

   :four:**影响**：可以释放有价值的内存资源，为其他进程提供空间

   :five:**主要操作**：将进程从内存暂时换出到磁盘，或者将进程从磁盘换入到内存

3. **短期调度（进程调度）**:

   :one:**目的**：决定哪个进程应该获得处理器资源，从而执行或继续执行

   :two:**时间范围**：非常频繁，通常在几毫秒到几秒之间。

   :three:**决策基础**：基于进程的优先级、执行时间、响应时间等

   :four:**影响**：对系统的响应时间、上下文切换率以及CPU利用率有直接影响

   :five:**主要操作**：执行上下文切换，即保存当前进程的状态并加载另一个进程的状态

# 3.2. 

上下文切换是操作系统调度的核心部分，允许CPU在多个进程之间切换，从而使每个进程都能获得执行时间。在两个进程之间进行上下文切换时，核心必须执行：

1. **保存当前进程的上下文**：

   :one:保存程序计数器（PC）的值，它指示下一条要执行的指令的位置

   :two:保存当前进程的处理器寄存器的值

   :three:保存当前的堆栈指针和其他重要的系统信息

2. **更新进程控制块（PCB）**：每个进程都有一个与之关联的进程控制块，其中包含了该进程的状态信息、程序计数器、堆栈指针、内存分配情况等信息。在上下文切换时，核心必须更新当前进程的PCB，将之前保存的信息写入到这个块中

3. **选择下一个要执行的进程**：调度程序（scheduler）会基于某种调度算法（例如轮询、优先级调度等）来选择下一个要执行的进程

4. **加载新进程的上下文**：

   :one:设置程序计数器为该进程上次执行停止时的值

   :two:恢复该进程的处理器寄存器的值

   :three:恢复其堆栈指针和其他系统信息

5. **更新内存管理单元**：如果操作系统使用了任何内存管理技术（如分段、分页等），那么在上下文切换时可能还需要更新相关的内存管理硬件

6. **开始执行新进程**：一旦新进程的上下文被加载到CPU，该进程就会开始执行，直到它再次被中断或完成其执行



# 3.X. 处理流程

1. **Scheduler()**:

   当CPU处于空闲状态或当前正在执行的进程完成其CPU时间片或因其他原因被中断时，调度程序（Scheduler）将被调用：

   :one:**保存上下文**：保存当前正在执行的进程的状态信息，如寄存器、程序计数器等

   :two:**选择进程**：根据所使用的调度算法（例如轮询、优先级调度、最短作业优先等）从就绪队列中选择一个进程执行

   :three:**进程状态转换**：将当前进程的状态从"执行"更改为"就绪"/"等待"，并将选定的新进程的状态更改为"执行"

   :four:**加载上下文**：加载选定进程的状态信息，如寄存器、程序计数器等

   :five:**转移控制**：将CPU的控制权交给被选中的进程

2. **Interrupter()**:

   当发生中断（例如I/O完成、时钟中断、硬件错误等）时，中断处理程序（Interrupter）将被调用：

   :one: **保存上下文**：保存当前正在执行的进程的状态信息，如寄存器、程序计数器等

   :two: **确定中断类型**：检查中断向量或中断寄存器以确定中断的原因和类型

   :three:**中断处理**：根据中断的类型，执行相应的中断服务程序。例如，如果是I/O完成中断，系统可能需要将数据从缓冲区移动到内存，并更新相关的进程状态

   :four:**决定下一步**：中断处理完成后，系统必须决定是返回到被中断的进程继续执行，还是调用调度程序选择新的进程

   :five: **加载上下文**：如果决定返回到被中断的进程，则加载该进程的状态信息；如果决定调度新的进程，则加载新进程的状态信息

   :six: **恢复执行**：返回到被选中的进程继续执行
